!function(e){"use strict";function c(e,t){for(var s=Object(e),n=1;n<arguments.length;n++){var o=arguments[n];if(null!=o)for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(s[i]=o[i])}return s}function t(e,t){this.container="string"==typeof e?f.querySelector(e):e,this.config={barType:"default",minBarSize:10,alwaysShowBars:!1,horizontalMouseScroll:!1,scrollX:!0,scrollY:!0,navButtons:!1,scrollAmount:10,mutationObserver:{attributes:!1,childList:!0,subtree:!0},onInit:function(){},onUpdate:function(){},onStart:function(){},onScroll:function(){},onEnd:function(){},classes:{container:"mb-container",content:"mb-content",track:"mb-track",bar:"mb-bar",visible:"mb-visible",progress:"mb-progress",hover:"mb-hover",scrolling:"mb-scrolling",textarea:"mb-textarea",wrapper:"mb-wrapper",nav:"mb-nav",btn:"mb-button",btns:"mb-buttons",increase:"mb-increase",decrease:"mb-decrease",item:"mb-item",itemVisible:"mb-item-visible",itemPartial:"mb-item-partial",itemHidden:"mb-item-hidden"}},t?this.config=c({},this.config,t):d.MiniBarOptions&&(this.config=c({},this.config,d.MiniBarOptions)),this.css=d.getComputedStyle(this.container),this.size=v.scrollWidth(),this.textarea="textarea"===this.container.nodeName.toLowerCase(),this.bars={x:{},y:{}},this.tracks={x:{},y:{}},this.lastX=0,this.lastY=0,this.scrollDirection={x:0,y:0},this.events={};for(var n,o,i,r,s=["scroll","mouseenter","mousedown","mousemove","mouseup","wheel"],a=0;a<s.length;a++)this.events[s[a]]=this["_"+s[a]].bind(this);this.events.update=this.update.bind(this),this.events.debounce=(n=this.events.update,o=50,function(){var e=this,t=arguments,s=i&&!r;clearTimeout(r),r=setTimeout(function(){r=null,i||n.apply(e,t)},o),s&&n.apply(e,t)}),this.init()}var n,d=window,f=document,o=f.body,l={x:"left",y:"top"},h={x:"width",y:"height"},u={x:"scrollLeft",y:"scrollTop"},m={x:"scrollWidth",y:"scrollHeight"},i={x:"offsetWidth",y:"offsetHeight"},p={x:"pageX",y:"pageY"},v={css:function(e,t){var s=e&&e.style,n="[object Object]"===Object.prototype.toString.call(t);if(s){if(!t)return d.getComputedStyle(e);n&&r(t,function(e,t){e in s||(e="-webkit-"+e),s[e]=t+("string"==typeof t||"opacity"===e?"":"px")})}},rect:function(e){var t=d,s=e.getBoundingClientRect(),n=f.documentElement||o.parentNode||o,e=void 0!==t.pageXOffset?t.pageXOffset:n.scrollLeft,n=void 0!==t.pageYOffset?t.pageYOffset:n.scrollTop;return{x:s.left+e,y:s.top+n,x2:s.left+s.width+e,y2:s.top+s.height+n,height:Math.round(s.height),width:Math.round(s.width)}},classList:{contains:function(e,t){if(e)return e.classList?e.classList.contains(t):!!e.className&&!!e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))},add:function(e,t){v.classList.contains(e,t)||(e.classList?e.classList.add(t):e.className=e.className.trim()+" "+t)},remove:function(e,t){v.classList.contains(e,t)&&(e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(^|\\s)"+t.split(" ").join("|")+"(\\s|$)","gi")," "))},toggle:function(e,t,s){s=this.contains(e,t)?!0!==s&&"remove":!1!==s&&"add";s&&this[s](e,t)}},on:function(e,t,s){e.addEventListener(t,s,!1)},off:function(e,t,s){e.removeEventListener(t,s)},isCollection:function(e){return Array.isArray(e)||e instanceof HTMLCollection||e instanceof NodeList},scrollWidth:function(){var e,t=f.createElement("div");return t.style.cssText="width: 100; height: 100; overflow: scroll; position: absolute; top: -9999;",f.body.appendChild(t),e=t.offsetWidth-t.clientWidth,f.body.removeChild(t),e}},r=function(e,t,s){if("[object Object]"===Object.prototype.toString.call(e))for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.call(s,n,e[n]);else for(var o=0,i=e.length;o<i;o++)t.call(s,o,e[o])},b=d.requestAnimationFrame||(n=0,d.webkitRequestAnimationFrame||d.mozRequestAnimationFrame||function(e){var t=(new Date).getTime(),s=Math.max(0,16-(t-n));return n=t+s,setTimeout(function(){e(t+s)},s)}),g=d.cancelAnimationFrame||void clearTimeout(void 0),s=t.prototype;s.init=function(){var c=this,l=c.config,s=c.events;if(!c.initialised){if(c.textarea)c.content=c.container,c.container=f.createElement("div"),v.classList.add(c.container,l.classes.textarea),c.wrapper=f.createElement("div"),v.classList.add(c.wrapper,l.classes.wrapper),c.container.appendChild(c.wrapper),c.content.parentNode.insertBefore(c.container,c.content),c.content.addEventListener("input",function(e){c.update()});else for(c.content=f.createElement("div");c.container.firstChild;)c.content.appendChild(c.container.firstChild);if(v.classList.add(c.container,l.classes.container),v.classList.add(c.content,l.classes.content),l.alwaysShowBars&&v.classList.add(c.container,l.classes.visible),r(c.tracks,function(o,e){var i,r,t,a;c.bars[o].node=f.createElement("div"),e.node=f.createElement("div"),v.classList.add(e.node,l.classes.track),v.classList.add(e.node,l.classes.track+"-"+o),v.classList.add(c.bars[o].node,l.classes.bar),e.node.appendChild(c.bars[o].node),l.navButtons?(i=f.createElement("button"),r=f.createElement("button"),t=f.createElement("div"),a=l.scrollAmount,i.className=l.classes.btn+" "+l.classes.decrease,r.className=l.classes.btn+" "+l.classes.increase,t.className=l.classes.btns+" "+l.classes.btns+"-"+o,t.appendChild(i),t.appendChild(e.node),t.appendChild(r),c.container.appendChild(t),v.classList.add(c.container,l.classes.nav),v.on(t,"mousedown",function(e){var t,s,n=e.target;g(c.frame),n!==r&&n!==i||(t=c.content[u[o]],(s=function(e){switch(c.content[u[o]]=t,n){case i:t-=a;break;case r:t+=a}c.frame=b(s)})())}),v.on(t,"mouseup",function(e){var t=e.target,e=5*a;g(c.frame),t!==r&&t!==i||c.scrollBy(t===i?-e:e,o)})):c.container.appendChild(e.node),"progress"===l.barType&&v.classList.add(e.node,l.classes.progress),v.on(e.node,"mousedown",s.mousedown),v.on(e.node,"mouseenter",function(e){v.classList.add(c.container,l.classes.hover+"-"+o)}),v.on(e.node,"mouseleave",function(e){c.down||v.classList.remove(c.container,l.classes.hover+"-"+o)})}),(c.textarea?c.wrapper:c.container).appendChild(c.content),"static"===c.css.position&&(c.manualPosition=!0,c.container.style.position="relative"),l.observableItems){var e=this.getItems();if(e.length&&"IntersectionObserver"in window){c.items=e;for(var t=[],n=0;n<1;n+=.01)t.push(n);var o=function(e,t){e.forEach(e=>{var t=e.target,s=e.intersectionRatio,n=e.isIntersecting,o=!n&&s<=0,e=n&&0<s&&s<1;v.classList.toggle(t,l.classes.itemVisible,n&&1<=s),v.classList.toggle(t,l.classes.itemPartial,e),v.classList.toggle(t,l.classes.itemHidden,o)})};this.intersectionObserver=new IntersectionObserver(o,{root:null,rootMargin:"0px",threshold:t}),r(e,function(e,t){c.intersectionObserver.observe(t)})}}c.update(),v.on(c.content,"scroll",s.scroll),v.on(c.container,"mouseenter",s.mouseenter),l.horizontalMouseScroll&&v.on(c.content,"wheel",s.wheel),v.on(d,"resize",s.debounce),v.on(f,"DOMContentLoaded",s.update),v.on(d,"load",s.update),"MutationObserver"in window&&(o=function(e,t){if(c.intersectionObserver)for(var s of e)if("childList"==s.type){for(var n of s.addedNodes)c.intersectionObserver.observe(n);for(var n of s.removedNodes)c.intersectionObserver.unobserve(n)}c.intersectionObserver&&(c.items=c.getItems()),c.update()},this.mutationObserver=new MutationObserver(o),this.mutationObserver.observe(this.content,this.config.mutationObserver)),c.initialised=!0,setTimeout(function(){c.config.onInit.call(c,c.getData())},10)}},s.getItems=function(){var e=this.config;let t;return"string"==typeof e.observableItems&&(t=this.content.querySelectorAll(e.observableItems)),(e.observableItems instanceof HTMLCollection||e.observableItems instanceof NodeList)&&(t=[].slice.call(e.observableItems)),t},s.getData=function(e){var t=this.content,s=t.scrollTop,n=t.scrollLeft,o=t.scrollHeight,i=t.scrollWidth,r=t.offsetWidth,a=t.offsetHeight,t=this.size;return{scrollTop:s,scrollLeft:n,scrollHeight:o,scrollWidth:i,offsetWidth:r,offsetHeight:a,containerRect:this.rect,barSize:t}},s.scrollTo=function(e,t){void 0===t&&(t="y");var s,n=this.getData();"string"==typeof e?"start"===e?s=-n[u[t]]:"end"===e&&(s=n[m[t]]-n[i[t]]-n[u[t]]):s=e-n[u[t]],this.scrollBy(s,t)},s.scrollBy=function(t,s,n,o){var i,r,a,c;void 0===s&&(s="y"),0!==n?(void 0===n&&(n=250),o=o||function(e,t,s,n){return-s*(e/=n)*(e-2)+t},i=this,r=Date.now(),a=i.content[u[s]],i.frame=(c=function(){var e=Date.now()-r;if(n<e)return g(i.frame),void(i.content[u[s]]=Math.ceil(a+t));i.content[u[s]]=Math.ceil(o(e,a,t,n)),i.frame=b(c)})()):this.content[u[s]]+=t},s.scrollToTop=function(){this.scrollTo(0)},s.scrollToBottom=function(){var e=this.getData();this.scrollTo(e.scrollHeight-e.offsetHeight)},s.update=function(){var s=this,e=s.config,t=s.content,n=s.size;s.rect=v.rect(s.container),s.scrollTop=t.scrollTop,s.scrollLeft=t.scrollLeft,s.scrollHeight=t.scrollHeight,s.scrollWidth=t.scrollWidth,s.offsetWidth=t.offsetWidth,s.offsetHeight=t.offsetHeight,s.clientWidth=t.clientWidth,s.clientHeight=t.clientHeight;var o=s.scrollWidth>s.offsetWidth&&!s.textarea,i=s.scrollHeight>s.offsetHeight;v.classList.toggle(s.container,"mb-scroll-x",o&&e.scrollX&&!e.hideBars),v.classList.toggle(s.container,"mb-scroll-y",i&&e.scrollY&&!e.hideBars),v.css(t,{overflowX:o?"auto":"",overflowY:i?"auto":"",marginBottom:o?-n:"",paddingBottom:o?n:"",marginRight:i?-n:"",paddingRight:i&&!e.hideBars?n:""}),s.scrollX=o,s.scrollY=i,r(s.tracks,function(e,t){c(t,v.rect(t.node)),c(s.bars[e],v.rect(s.bars[e].node))}),s.updateBars(),s.wrapperPadding=0,s.textarea&&(i=v.css(s.wrapper),s.wrapperPadding=parseInt(i.paddingTop,10)+parseInt(i.paddingBottom,10),!s.down&&s.content.selectionStart>=s.content.value.length&&(s.content.scrollTop=s.scrollToBottom())),this.config.onUpdate.call(this,this.getData())},s.updateBar=function(e){var t=this,s={},n=h,o=t.config,i=t.tracks[e][n[e]],r=t.rect[n[e]]-t.wrapperPadding,a=t.content[u[e]],c=i/t[m[e]],a=a/(t[m[e]]-r);"progress"===o.barType?s[n[e]]=Math.floor(i*a):(s[n[e]]=Math.max(Math.floor(c*r),o.minBarSize),s[l[e]]=Math.floor((i-s[n[e]])*a)),b(function(){v.css(t.bars[e].node,s)})},s.updateBars=function(){r(this.bars,function(e,t){this.updateBar(e)},this)},s.destroy=function(){var e=this,s=e.config,n=e.container;if(e.initialised){for(v.off(n,"mouseenter",e.events.mouseenter),v.off(d,"resize",e.events.debounce),v.classList.remove(n,s.classes.visible),v.classList.remove(n,s.classes.container),v.classList.remove(n,s.classes.nav),r(e.tracks,function(e,t){n.removeChild(s.navButtons?t.node.parentNode:t.node),v.classList.remove(n,"mb-scroll-"+e)});e.content.firstChild;)n.appendChild(e.content.firstChild);n.removeChild(e.content),e.manualPosition&&(n.style.position=""),e.bars={x:{},y:{}},e.tracks={x:{},y:{}},e.content=null,e.mutationObserver&&(e.mutationObserver.disconnect(),e.mutationObserver=!1),s.observableItems&&(e.intersectionObserver&&(e.intersectionObserver.disconnect(),e.intersectionObserver=!1),r(e.items,function(e,t){t=t.node||t;v.classList.remove(t,s.classes.item),v.classList.remove(t,s.classes.itemVisible),v.classList.remove(t,s.classes.itemPartial),v.classList.remove(t,s.classes.itemHidden)})),e.initialised=!1}},s._scroll=function(e){var t=this.getData(!0);t.scrollLeft>this.lastX?this.scrollDirection.x=1:t.scrollLeft<this.lastX&&(this.scrollDirection.x=-1),t.scrollTop>this.lastY?this.scrollDirection.y=1:t.scrollTop<this.lastY&&(this.scrollDirection.y=-1),this.updateBars(),this.config.onScroll.call(this,t),this.lastX=t.scrollLeft,this.lastY=t.scrollTop},s._wheel=function(e){e.preventDefault(),this.scrollBy(100*e.deltaY,"x")},s._mouseenter=function(e){this.updateBars()},s._mousedown=function(e){e.preventDefault();var t=this,s=t.config,n="progress"===s.barType?"tracks":"bars",o=e.target===t[n].x.node?"x":"y";if(v.classList.contains(e.target,"mb-track")){var o=e.target===t.tracks.x.node?"x":"y",i=t.tracks[o],n=i[h[o]],n=(e[p[o]]-i[o])/n*(t.content[m[o]]-t.rect[h[o]]);return this.scrollTo(n,o)}t.down=!0,t.currentAxis=o,t.update(),v.classList.add(t.container,s.classes.visible),v.classList.add(t.container,s.classes.scrolling+"-"+o),"progress"===s.barType?(t.origin={x:e.pageX-t.tracks[o].x,y:e.pageY-t.tracks[o].y},t._mousemove(e)):t.origin={x:e.pageX-t.bars[o].x,y:e.pageY-t.bars[o].y},v.on(f,"mousemove",t.events.mousemove),v.on(f,"mouseup",t.events.mouseup)},s._mousemove=function(e){e.preventDefault();var t=this,s=this.origin,n=this.currentAxis,o=t.tracks[n],i=o[h[n]],r="progress"===t.config.barType,i=(r?e[p[n]]-o[n]:e[p[n]]-s[n]-o[n])/i,a=r?i*(t.content[m[n]]-t.rect[h[n]]):i*t[m[n]];b(function(){t.content[u[n]]=a})},s._mouseup=function(e){var t=this,s=t.config,n=t.events;v.classList.toggle(t.container,s.classes.visible,s.alwaysShowBars),v.classList.remove(t.container,s.classes.scrolling+"-"+t.currentAxis),v.classList.contains(e.target,s.classes.bar)||(v.classList.remove(t.container,s.classes.hover+"-x"),v.classList.remove(t.container,s.classes.hover+"-y")),t.currentAxis=null,t.down=!1,v.off(f,"mousemove",n.mousemove),v.off(f,"mouseup",n.mouseup)},e.MiniBar=t}(this);