(function(){(function(b){var F="currentScript";F in b||Object.defineProperty(b,F,{get:function(){try{throw new Error}catch(V){var x=0,j=/.*at [^(]*\((.*):(.+):(.+)\)$/ig.exec(V.stack),$=j&&j[1]||!1,X=j&&j[2]||!1,J=b.location.href.replace(b.location.hash,""),H,T,l,O=b.getElementsByTagName("script");for($===J&&(H=b.documentElement.outerHTML,T=new RegExp("(?:[^\\n]+?\\n){0,"+(X-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),l=H.replace(T,"$1").trim());x<O.length;x++)if(O[x].readyState==="interactive"||O[x].src===$||$===J&&O[x].innerHTML&&O[x].innerHTML.trim()===l)return O[x];return null}}})})(document);var vt=function(){if(!document.currentScript)return!1;for(var b=null,F=[Object,Function,Number],x=0;b===null&&x<F.length;)b=F[x].prototype.toString,String(b).indexOf("native")===-1&&(b=null,x+=1);var j=Function.prototype.toString,$=/^\[object .+?Constructor\]$/,X=RegExp("^"+String(b).replace(/[.*+?^${}()|[\]\/\\]/g,"\\$&").replace(/toString|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),J=b===null?function(f){return!0}:function(f){var m=typeof f;return m=="function"?X.test(j.call(f)):f&&m=="object"&&$.test(b.call(f))||!1},H="https://www.thehotelsnetwork.com/polyfill/v3/polyfill.min.js",T={generic:{test:function(){const A=!!(window.URL&&"Symbol"in self&&window.EventSource&&window.fetch&&"name"in Function.prototype&&"isInteger"in Number&&"MAX_SAFE_INTEGER"in Number&&"Promise"in self&&[].fill&&[].flat&&[].includes&&[].flatMap&&Object.assign&&window.Map&&window.WeakMap&&window.requestIdleCallback&&"navigator"in self&&"sendBeacon"in navigator&&typeof navigator.sendBeacon=="function"&&"AbortController"in self&&typeof self.AbortController=="function"&&"padStart"in String.prototype&&"padEnd"in String.prototype&&"replaceAll"in String.prototype&&"includes"in String.prototype&&"queueMicrotask"in self),f=document.querySelector('script[src="'+T.generic.urls[0]+'"]')!==null;return!A&&!f},urls:[`${H}?version=3.111.0&features=Symbol%2Cdefault%2Cfetch%2CEventSource%2CFunction.name%2CNumber.isInteger%2CNumber.MAX_SAFE_INTEGER%2CWeakMap%2CrequestIdleCallback%2CArray.prototype.flat%2CArray.prototype.includes%2CArray.prototype.flatMap%2Cnavigator.sendBeacon%2CAbortController%2CString.prototype.padStart%2CString.prototype.padEnd%2CString.prototype.replaceAll%2CqueueMicrotask`]},"Fn.bind":{test:function(){const A=J(Function.prototype.bind),f=document.querySelector('script[src="'+T["Fn.bind"].urls[0]+'"]')!==null;return!A&&!f},urls:[`${H}?version=3.111.0&features=Function.prototype.bind%7Calways&excludes=Object.defineProperty`]}},l=[window,document,"script"],O=[],V=function(f,m,_,a,n,o){n=m.createElement(_),o=m.currentScript,n.src=a,n.inject=function(){(o.parentNode||m.head).insertBefore(n,o.parentNode&&o||m.head.lastElementChild),setTimeout(n.onload,1e3)},n.onload=function(s){return function(){s||(s=!0,(O.shift()||{inject:function(){}}).inject())}}(!1),O.push(n)},G,D;for(G in T)if(T.hasOwnProperty(G)&&T[G].test())for(D=0;D<T[G].urls.length;D+=1)V.apply(null,l.concat(T[G].urls[D]));var B=O.length;return B&&(V.apply(null,l.concat(document.currentScript.src)),O.shift().inject()),!!B}();vt||function(){"use strict";(function(){if(typeof self<"u"&&!self.thn){self.thn={};(function(){function f(t,e){return(e||"")+" (SystemJS https://github.com/systemjs/systemjs/blob/main/docs/errors.md#"+t+")"}var m=typeof Symbol<"u",_=typeof self<"u",a=typeof document<"u",n=_?self:global,o;if(a){var s=document.querySelector("base[href]");s&&(o=s.href)}if(!o&&typeof location<"u"){o=location.href.split("#")[0].split("?")[0];var d=o.lastIndexOf("/");d!==-1&&(o=o.slice(0,d+1))}var v=/\\/g;function u(t,e){if(t.indexOf("\\")!==-1&&(t=t.replace(v,"/")),t[0]==="/"&&t[1]==="/")return e.slice(0,e.indexOf(":")+1)+t;if(t[0]==="."&&(t[1]==="/"||t[1]==="."&&(t[2]==="/"||t.length===2&&(t+="/"))||t.length===1&&(t+="/"))||t[0]==="/"){var r=e.slice(0,e.indexOf(":")+1),i;if(e[r.length+1]==="/"?r!=="file:"?(i=e.slice(r.length+2),i=i.slice(i.indexOf("/")+1)):i=e.slice(8):i=e.slice(r.length+(e[r.length]==="/")),t[0]==="/")return e.slice(0,e.length-i.length-1)+t;for(var c=i.slice(0,i.lastIndexOf("/")+1)+t,p=[],g=-1,h=0;h<c.length;h++)g!==-1?c[h]==="/"&&(p.push(c.slice(g,h+1)),g=-1):c[h]==="."?c[h+1]==="."&&(c[h+2]==="/"||h+2===c.length)?(p.pop(),h+=2):c[h+1]==="/"||h+1===c.length?h+=1:g=h:g=h;return g!==-1&&p.push(c.slice(g)),e.slice(0,e.length-i.length)+p.join("")}}function C(t,e){return u(t,e)||(t.indexOf(":")!==-1?t:u("./"+t,e))}function P(t,e,r,i,c){for(var p in t){var g=u(p,r)||p,h=t[p];if(typeof h=="string"){var W=w(i,u(h,r)||h,c);W?e[g]=W:R("W1",p,h)}}}function M(t,e,r){t.imports&&P(t.imports,r.imports,e,r,null);var i;for(i in t.scopes||{}){var c=C(i,e);P(t.scopes[i],r.scopes[c]||(r.scopes[c]={}),e,r,c)}for(i in t.depcache||{})r.depcache[C(i,e)]=t.depcache[i];for(i in t.integrity||{})r.integrity[C(i,e)]=t.integrity[i]}function y(t,e){if(e[t])return t;var r=t.length;do{var i=t.slice(0,r+1);if(i in e)return i}while((r=t.lastIndexOf("/",r-1))!==-1)}function E(t,e){var r=y(t,e);if(r){var i=e[r];if(i===null)return;if(t.length>r.length&&i[i.length-1]!=="/")R("W2",r,i);else return i+t.slice(r.length)}}function R(t,e,r,i){console.warn(f(t,[r,e].join(", ")))}function w(t,e,r){for(var i=t.scopes,c=r&&y(r,i);c;){var p=E(e,i[c]);if(p)return p;c=y(c.slice(0,c.lastIndexOf("/")),i)}return E(e,t.imports)||e.indexOf(":")!==-1&&e}var z=m&&Symbol.toStringTag,k=m?Symbol():"@";function U(){this[k]={}}var S=U.prototype;S.import=function(t,e,r){var i=this;return e&&typeof e=="object"&&(r=e,e=void 0),Promise.resolve(i.prepareImport()).then(function(){return i.resolve(t,e,r)}).then(function(c){var p=rt(i,c,void 0,r);return p.C||gt(i,p)})},S.createContext=function(t){var e=this;return{url:t,resolve:function(r,i){return Promise.resolve(e.resolve(r,i||t))}}};function tt(t){return t.id}function et(t,e,r,i){if(t.onload(r,e.id,e.d&&e.d.map(tt),!!i),r)throw r}var nt;S.register=function(t,e,r){nt=[t,e,r]},S.getRegister=function(){var t=nt;return nt=void 0,t};function rt(t,e,r,i){var c=e.split("?")[0],p=t[k][c];if(p)return p;var g=[],h=Object.create(null);z&&Object.defineProperty(h,z,{value:"Module"});var W=Promise.resolve().then(function(){return t.instantiate(e,r,i)}).then(function(L){if(!L)throw Error(f(2,e));function Q(I,N){p.h=!0;var Z=!1;if(typeof I=="string")(!(I in h)||h[I]!==N)&&(h[I]=N,Z=!0);else{for(var q in I){var N=I[q];(!(q in h)||h[q]!==N)&&(h[q]=N,Z=!0)}I&&I.__esModule&&(h.__esModule=I.__esModule)}if(Z)for(var at=0;at<g.length;at++){var pt=g[at];pt&&pt(h)}return N}var Y=L[1](Q,L[1].length===2?{import:function(I,N){return t.import(I,c,N)},meta:t.createContext(c)}:void 0);return p.e=Y.execute||function(){},[L[0],Y.setters||[],L[2]||[]]},function(L){throw p.e=null,p.er=L,L}),Ot=W.then(function(L){return Promise.all(L[0].map(function(Q,Y){var I=L[1][Y],N=L[2][Y];return Promise.resolve(t.resolve(Q,c)).then(function(Z){var q=rt(t,Z,c,N);return Promise.resolve(q.I).then(function(){return I&&(q.i.push(I),(q.h||!q.I)&&I(q.n)),q})})})).then(function(Q){p.d=Q})});return p=t[k][c]={id:c,i:g,n:h,m:i,I:W,L:Ot,h:!1,d:void 0,e:void 0,er:void 0,E:void 0,C:void 0,p:void 0}}function ut(t,e,r,i){if(!i[e.id])return i[e.id]=!0,Promise.resolve(e.L).then(function(){return(!e.p||e.p.e===null)&&(e.p=r),Promise.all(e.d.map(function(c){return ut(t,c,r,i)}))}).catch(function(c){throw e.er||(e.e=null),c})}function gt(t,e){return e.C=ut(t,e,e,{}).then(function(){return ft(t,e,{})}).then(function(){return e.n})}var yt=Object.freeze(Object.create(null));function ft(t,e,r){if(r[e.id])return;if(r[e.id]=!0,!e.e){if(e.er)throw e.er;return e.E?e.E:void 0}var i=e.e;e.e=null;var c;if(e.d.forEach(function(g){try{var h=ft(t,g,r);h&&(c=c||[]).push(h)}catch(W){throw e.er=W,W}}),c)return Promise.all(c).then(p);return p();function p(){try{var g=i.call(yt);if(g)return g=g.then(function(){e.C=e.n,e.E=null},function(h){throw e.er=h,e.E=null,h}),e.E=g;e.C=e.n,e.L=e.I=void 0}catch(h){throw e.er=h,h}finally{}}}n.thn.System=new U;var ot=Promise.resolve(),K={imports:{},scopes:{},depcache:{},integrity:{}},lt=a;S.prepareImport=function(t){return(lt||t)&&(it(),lt=!1),ot},a&&(it(),window.addEventListener("DOMContentLoaded",it)),S.addImportMap=function(t,e){M(t,e||o,K)};function it(){[].forEach.call(document.querySelectorAll("script"),function(t){if(!t.sp){if(t.type==="systemjs-module"){if(t.sp=!0,!t.src)return;System.import(t.src.slice(0,7)==="import:"?t.src.slice(7):C(t.src,o)).catch(function(r){if(r.message.indexOf("https://github.com/systemjs/systemjs/blob/main/docs/errors.md#3")>-1){var i=document.createEvent("Event");i.initEvent("error",!1,!1),t.dispatchEvent(i)}return Promise.reject(r)})}else if(t.type==="systemjs-importmap"){t.sp=!0;var e=t.src?(System.fetch||fetch)(t.src,{integrity:t.integrity,passThrough:!0}).then(function(r){if(!r.ok)throw Error(r.status);return r.text()}).catch(function(r){return r.message=f("W4",t.src)+`
`+r.message,console.warn(r),typeof t.onerror=="function"&&t.onerror(),"{}"}):t.innerHTML;ot=ot.then(function(){return e}).then(function(r){_t(K,r,t.src||o)})}}})}function _t(t,e,r){var i={};try{i=JSON.parse(e)}catch{console.warn(Error(f("W5")))}M(i,r,t)}if(a){window.addEventListener("error",function(t){dt=t.filename,mt=t.error});var wt=location.origin}S.createScript=function(t){var e=document.createElement("script");e.async=!0,t.indexOf(wt+"/")&&(e.crossOrigin="anonymous");var r=K.integrity[t];return r&&(e.integrity=r),e.src=t,e};var st,ht,ct={},St=S.register;S.register=function(t,e){if(a&&document.readyState==="loading"&&typeof t!="string"){var r=document.querySelectorAll("script[src]"),i=r[r.length-1];if(i){i.src,st=t;var c=this;ht=setTimeout(function(){ct[i.src]=[t,e],c.import(i.src)})}}else st=void 0;return St.call(this,t,e)};var dt,mt;S.instantiate=function(t,e){var r=ct[t];if(r)return delete ct[t],r;var i=this;return Promise.resolve(S.createScript(t)).then(function(c){return new Promise(function(p,g){c.addEventListener("error",function(){g(Error(f(3,[t,e].join(", "))))}),c.addEventListener("load",function(){if(document.head.removeChild(c),dt===t)g(mt);else{var h=i.getRegister(t);h&&h[0]===st&&clearTimeout(ht),p(h)}}),document.head.appendChild(c)})})},S.shouldFetch=function(){return!1},typeof fetch<"u"&&(S.fetch=fetch);var Et=S.instantiate,bt=/^(text|application)\/(x-)?javascript(;|$)/;S.instantiate=function(t,e,r){var i=this;return this.shouldFetch(t,e,r)?this.fetch(t,{credentials:"same-origin",integrity:K.integrity[t],meta:r}).then(function(c){if(!c.ok)throw Error(f(7,[c.status,c.statusText,t,e].join(", ")));var p=c.headers.get("content-type");if(!p||!bt.test(p))throw Error(f(4,p));return c.text().then(function(g){return g.indexOf("//# sourceURL=")<0&&(g+=`
//# sourceURL=`+t),(0,eval)(g),i.getRegister(t)})}):Et.apply(this,arguments)},S.resolve=function(t,e){return e=e||!1||o,w(K,u(t,e)||t,e)||Ct(t,e)};function Ct(t,e){throw Error(f(8,[t,e].join(", ")))}var xt=S.instantiate;S.instantiate=function(t,e,r){var i=K.depcache[t];if(i)for(var c=0;c<i.length;c++)rt(this,this.resolve(i[c],t),t);return xt.call(this,t,e,r)},_&&typeof importScripts=="function"&&(S.instantiate=function(t){var e=this;return Promise.resolve().then(function(){return importScripts(t),e.getRegister(t)})})})(),function(){(function(f){var m=f.thn.System,_=m.constructor.prototype,a;function n(s){var d=s.split("?"),v=[d[1],a].filter(u=>u).join("&").replace(/\w/,"?$&");return d[0]+v}var o=_.resolve;_.resolve=function(s,d){return a?o.call(this,n(s),d):(a=s.split("?")[1]||"",o.call(this,s,d))}})(typeof self<"u"?self:global)}()}})();var b={exports:{}};(function(f,m){(function(_){function a(n,o){o=o||{},this._id=a._generateUUID(),this._promise=o.promise||Promise,this._frameId=o.frameId||"CrossStorageClient-"+this._id,this._origin=a._getOrigin(n),this._requests={},this._connected=!1,this._closed=!1,this._count=0,this._timeout=o.timeout||5e3,this._listener=null,this._store=o.store||"localStorage",this._installListener();var s;o.frameId&&(s=document.getElementById(o.frameId)),s&&this._poll(),s=s||this._createFrame(n),this._hub=s.contentWindow}a.frameStyle={display:"none",position:"absolute",top:"-999px",left:"-999px"},a._getOrigin=function(n){var o,s,d;return o=document.createElement("a"),o.href=n,o.host||(o=window.location),!o.protocol||o.protocol===":"?s=window.location.protocol:s=o.protocol,d=s+"//"+o.host,d=d.replace(/:80$|:443$/,""),d},a._generateUUID=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var o=Math.random()*16|0,s=n=="x"?o:o&3|8;return s.toString(16)})},a.prototype.onConnect=function(){var n=this;return this._connected?this._promise.resolve():this._closed?this._promise.reject(new Error("CrossStorageClient has closed")):(this._requests.connect||(this._requests.connect=[]),new this._promise(function(o,s){var d=setTimeout(function(){s(new Error("CrossStorageClient could not connect"))},n._timeout);n._requests.connect.push(function(v){if(clearTimeout(d),v)return s(v);o()})}))},a.prototype.set=function(n,o){return this._request("set",{key:n,value:o})},a.prototype.get=function(n){var o=Array.prototype.slice.call(arguments);return this._request("get",{keys:o})},a.prototype.del=function(){var n=Array.prototype.slice.call(arguments);return this._request("del",{keys:n})},a.prototype.clear=function(){return this._request("clear")},a.prototype.getKeys=function(){return this._request("getKeys")},a.prototype.close=function(){var n=document.getElementById(this._frameId);n&&n.parentNode.removeChild(n),window.removeEventListener?window.removeEventListener("message",this._listener,!1):window.detachEvent("onmessage",this._listener),this._connected=!1,this._closed=!0},a.prototype._installListener=function(){var n=this;this._listener=function(o){var s,d,v,u;if(!(n._closed||!o.data||typeof o.data!="string")&&(d=o.origin==="null"?"file://":o.origin,d===n._origin)){if(o.data==="cross-storage:unavailable"){if(n._closed||n.close(),!n._requests.connect)return;for(v=new Error("Closing client. Could not access localStorage in hub."),s=0;s<n._requests.connect.length;s++)n._requests.connect[s](v);return}if(o.data.indexOf("cross-storage:")!==-1&&!n._connected){if(n._connected=!0,!n._requests.connect)return;for(s=0;s<n._requests.connect.length;s++)n._requests.connect[s](v);delete n._requests.connect}if(o.data!=="cross-storage:ready"){try{u=JSON.parse(o.data)}catch{return}u.id&&n._requests[u.id]&&n._requests[u.id](u.error,u.result)}}},window.addEventListener?window.addEventListener("message",this._listener,!1):window.attachEvent("onmessage",this._listener)},a.prototype._poll=function(){var n,o,s;n=this,s=n._origin==="file://"?"*":n._origin,o=setInterval(function(){if(n._connected)return clearInterval(o);n._hub&&n._hub.postMessage("cross-storage:poll",s)},50)},a.prototype._createFrame=function(n){var o,s;o=window.document.createElement("iframe"),o.id=this._frameId,o.sandbox="allow-scripts allow-same-origin";for(s in a.frameStyle)a.frameStyle.hasOwnProperty(s)&&(o.style[s]=a.frameStyle[s]);return window.document.body.appendChild(o),o.src=n,o},a.prototype._request=function(n,o){var s,d;return this._closed?this._promise.reject(new Error("CrossStorageClient has closed")):(d=this,d._count++,o=o||{},o.store=this._store,s={id:this._id+":"+d._count,method:"cross-storage:"+n,params:o},new this._promise(function(v,u){var C,P,M;C=setTimeout(function(){d._requests[s.id]&&(delete d._requests[s.id],u(new Error("Timeout: could not perform "+s.method)))},d._timeout),d._requests[s.id]=function(y,E){if(clearTimeout(C),delete d._requests[s.id],y)return u(new Error(y));v(E)},Array.prototype.toJSON&&(P=Array.prototype.toJSON,Array.prototype.toJSON=null),M=d._origin==="file://"?"*":d._origin,d._hub.postMessage(JSON.stringify(s),M),P&&(Array.prototype.toJSON=P)}))},f.exports?f.exports=a:m.CrossStorageClient=a})()})(b,b.exports);var F=b.exports;const x="thn-cross-store",j="data-thn-current",$="__thn_script_src",X={environment:"production"},J={production:{environment:"production",hostname:"www.thehotelsnetwork.com",host:"https://www.thehotelsnetwork.com"},staging:{environment:"staging",hostname:"www.stg.thehotelsnetwork.com",host:"https://www.stg.thehotelsnetwork.com"},local:{environment:"local",hostname:"web.thn",host:"https://web.thn"},test:{environment:"test",hostname:"127.0.0.1",host:"https://127.0.0.1:8080"},__common__:{custom_geoname:"",minified:!0,office:!1,latest:"4.0"}},H=typeof global=="object"&&global&&global.Object===Object&&global,T=typeof self=="object"&&self&&self.Object===Object&&self,l=H||T||Function("return this")();function O(){let f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const m={};let _=!1;return f.forEach(function(a){m[a]=l[a],delete l[a]}),function(){_||(f.forEach(function(n){l[n]=m[n]}),_=!0)}}async function V(f,m){try{const _=await f.keys(),a=await Promise.all(_.map(s=>f.open(s))),n=await Promise.all(a.map(s=>s.keys())),o=[];return a.forEach((s,d)=>{n[d].forEach(u=>{m(u)&&o.push(s.delete(u))})}),await Promise[Promise.allSettled?"allSettled":"all"](o).catch(()=>""),""}catch{return""}}const G=new Promise(function(f){let m,_=!1;function a(){_||(_=!0,m&&clearInterval(m),f())}if(l.document.addEventListener)l.document.addEventListener("DOMContentLoaded",a,!1),l.addEventListener("load",a,!1);else if(l.attachEvent){l.attachEvent("onload",a);let n;const o=l.document.createElement("div");try{n=l.frameElement===null}catch{}o.doScroll&&n&&l.external&&(m=setInterval(function(){try{o.doScroll(),a()}catch{}},30))}(l.document.readyState==="complete"||l.document.readyState==="interactive")&&a()}),D=()=>G;function B(f){let{params:m,baseUrl:_}=f;if(!_)return Promise.reject();const a=new URL(_);return a.pathname="/get_loader_data",Object.keys(m).forEach(n=>a.searchParams.set(n,m[n])),l.fetch(a.toString(),{credentials:"include"}).then(function(n){if(!n.ok)throw Error("".concat(n.status," ").concat(n.statusText));return n.json()})}function A(f){typeof f=="string"&&(f=new URL(f));const[m,_,a,n,o,s,d]=[f.searchParams.get("property_id"),f.searchParams.get("hotel_id"),f.searchParams.get("account_key"),f.searchParams.get("bahiaprincipe_id"),f.searchParams.get("octorate_id"),f.searchParams.get("partnership_id"),f.searchParams.get("partnership_hotel_id")];if(m)return Promise.resolve({property_id:m});if(_||n||o||s&&d){const v=new URL(f);return v.pathname="/get_hotel_property_rel",l.fetch(v.toString()).then(function(u){if(!u.ok)throw Error("".concat(u.status," ").concat(u.statusText));return u.json()}).then(function(u){const C={};return!u||u.result!==1||(u.property_id&&(C.property_id=u.property_id),u.account_key&&(C.account_key=u.account_key)),C})}return a?Promise.resolve({account_key:a}):Promise.resolve({})}(function(){l.rho&&(l.receive_event=function(){const v={_isDummy:!0,_original:l.receiveEvent,_registry:[]};return Object.assign(function(){v._registry.push(arguments)},v)}());const{document:f}=l,{currentScript:m}=f;if(m){const v=Array.from(f.querySelectorAll("script[".concat(j,"]"))),u=v.filter(P=>!(m.src===P.src&&Number(P.getAttribute(j))));u.forEach(P=>{P.setAttribute(j,0)});const C=u.length===v.length?1:0;if(m.setAttribute(j,C),!C)return}const _={backupGlobals:O,domReady:D,getPidOrAccount:A,getLoaderData:B};let a,n=X;const o=l[$]&&{src:l[$]}||m,s=function(u){!u||u.message.indexOf("Timeout: ")>-1||u.message.indexOf("CrossStorageClient ")>-1||(l.thn&&l.thn.container?l.thn.container.errorMonitor.addError(u):l.console&&console.error&&console.error(u))},d=function(){const u=new URL(o.src);u.protocol="https:";const C=u.origin,P="".concat(C,"/widget/core/latest/hub/"),M=l.thn&&l.thn.bottle&&l.thn.bottle.container&&l.thn.bottle.container.$has("crossLocalStorage")&&l.thn.bottle.container.crossLocalStorage||new F(P,{frameId:x});return M.onConnect().then(()=>M.get("thn.data._ENV")).catch(()=>"").then(y=>{if(y&&(n=JSON.parse(y)),n.host){const E=new URL(n.host);Object.assign(u,{protocol:E.protocol,host:E.host})}else if(n.hostname)u.host=n.hostname;else if(n.environment&&J[n.environment]){const E=new URL(J[n.environment].host);Object.assign(u,{protocol:E.protocol,host:E.host})}if("caches"in l)return V(l.caches,E=>E.url.includes(u.host))}).then(()=>A(u)).then(y=>B({params:y,baseUrl:u})).then(y=>{var E,R;const w=y.data&&y.data.init_thn_data;w&&(y.data.init_thn_data._ENV=n),y._ENV=n;const z=(E=(R=w?.version)!==null&&R!==void 0?R:y.defaultVersion)!==null&&E!==void 0?E:J.__common__.latest,k="index",U="".concat(n.minified===void 0||n.minified?".min":"",".js"),S="".concat(k).concat(U),tt=y.checksums&&y.checksums.main&&y.checksums.main[S],et=new URL(u.toString().split("?")[0]);return et.pathname="/widget/core/".concat(z,"/dist/main/").concat(S),tt&&et.searchParams.set("h",tt),a=O(["DataLayerHelper"]),Promise.all([l.thn.System.import(et.toString()),y])}).then(y=>{let[E,R]=y;a(),a=void 0;const w=E.default;if(l.thn)try{w.System=l.thn.System}catch{}return l.thn=w,!("getPidOrAccount"in w)&&(Object.assign(w,_),w.bottle.factory("domReady",()=>D),w.bottle.factory("constructors.CrossStorageClient",()=>F),w.bottle.factory("crossLocalStorage",()=>M),w.bottle.factory("crossSessionStorage",k=>new k.constructors.CrossStorageClient(P,{frameId:x,store:"sessionStorage"})),w.bottle.factory("crossCookieStorage",k=>new k.constructors.CrossStorageClient(P,{frameId:x,store:"cookieStorage"})),w.bottle.factory("getLoaderData",()=>B),w.bottle.factory("getPidOrAccount",()=>A)),w.bootload(R).then(()=>[w,R])}).then(y=>{let[E,R]=y;if(R.data)E.identityCheck({loader:R});else{const w=u.searchParams.get("partnership_id")||"";E.partnershipCheck(w)}})};l.__thnScriptTimer&&clearTimeout(l.__thnScriptTimer),l.__thnScriptTimer=setTimeout(()=>{delete l.__thnScriptTimer;function v(){D().then(d).catch(s)}try{d().catch(v)}catch{v()}},0)})()}()})();
