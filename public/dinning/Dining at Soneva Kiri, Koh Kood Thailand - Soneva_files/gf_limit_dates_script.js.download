(function($){'use strict';gform.addFilter('gform_datepicker_options_pre_init',function(optionsObj,formId,fieldId){var ajaxdata=jQuery.parseJSON(jQuery.ajax({url:object.ajaxurl,type:'GET',dataType:"json",async:false,data:{'formId':formId,'action':'get_fields_settings','fieldId':fieldId,},success:function(data){},error:function(){console.log("error");}}).responseText);if(ajaxdata){var fields=ajaxdata.fields;if(fields['minimumField']=='sd'){var specific_date=fields['minspecificField'];optionsObj.minDate=new Date(specific_date);}else if(fields['minimumField']=='cd'){var current_date=new Date();if(fields['min_plus_minus_field']&&fields['minextra_kindField']&&fields['minextraField']){var new_date;switch(fields['minextra_kindField']){case 'y':if(fields['min_plus_minus_field']=='+'){new_date=new Date(current_date.getFullYear()+parseInt(fields['minextraField']),current_date.getMonth(),current_date.getDate());break;}else{new_date=new Date(current_date.getFullYear()-parseInt(fields['minextraField']),current_date.getMonth(),current_date.getDate());break;}
case 'm':if(fields['min_plus_minus_field']=='+'){new_date=new Date(current_date.getFullYear(),current_date.getMonth()+parseInt(fields['minextraField']),current_date.getDate());break;}else{new_date=new Date(current_date.getFullYear(),current_date.getMonth()-parseInt(fields['minextraField']),current_date.getDate());break;}
case 'd':if(fields['min_plus_minus_field']=='+'){new_date=new Date(current_date.getFullYear(),current_date.getMonth(),current_date.getDate()+parseInt(fields['minextraField']));break;}else{new_date=new Date(current_date.getFullYear(),current_date.getMonth(),current_date.getDate()-parseInt(fields['minextraField']));break;}
default:}}else{new_date=current_date}
optionsObj.minDate=new_date;}else{if(fields['minimumField']!=undefined){dependent_field="[name='input_"+fields['minimumField']+"']";jQuery(dependent_field).change(function(){dependent_date=new Date(jQuery(this).val());jQuery("[name='input_"+fieldId+"']").datepicker("change",{minDate:dependent_date});});}}
if(fields['maximumField']=='sd'){specific_date=fields['maxspecificField'];optionsObj.maxDate=new Date(specific_date);}else if(fields['maximumField']=='cd'){if(fields['max_plus_minus_field']&&fields['maxextra_kindField']&&fields['maxextraField']){var current_date=new Date();switch(fields['maxextra_kindField']){case 'y':if(fields['max_plus_minus_field']=='+'){new_date=new Date(current_date.getFullYear()+parseInt(fields['maxextraField']),current_date.getMonth(),current_date.getDate());break;}else{new_date=new Date(current_date.getFullYear()-parseInt(fields['maxextraField']),current_date.getMonth(),current_date.getDate());break;}
case 'm':if(fields['max_plus_minus_field']=='+'){new_date=new Date(current_date.getFullYear(),current_date.getMonth()+parseInt(fields['maxextraField']),current_date.getDate());break;}else{new_date=new Date(current_date.getFullYear(),current_date.getMonth()-parseInt(fields['maxextraField']),current_date.getDate());break;}
case 'd':if(fields['max_plus_minus_field']=='+'){new_date=new Date(current_date.getFullYear(),current_date.getMonth(),current_date.getDate()+parseInt(fields['maxextraField']));break;}else{new_date=new Date(current_date.getFullYear(),current_date.getMonth(),current_date.getDate()-parseInt(fields['maxextraField']));break;}
default:}
optionsObj.maxDate=new_date;}}else{if(fields['maximumField']!=undefined){dependent_field="[name='input_"+fields['maximumField']+"']";jQuery(dependent_field).change(function(){dependent_date=new Date(jQuery(this).val());jQuery("[name='input_"+fieldId+"']").datepicker("change",{maxDate:dependent_date});});}}
if(fields['alldayField']==undefined||fields['alldayField']){days_pass=[0,1,2,3,4,5,6];}else{var days_pass=[];if(fields['mondayField']){days_pass.push(1);}
if(fields['tuesdayField']){days_pass.push(2);}
if(fields['wendsdayField']){days_pass.push(3);}
if(fields['thursdayField']){days_pass.push(4);}
if(fields['fridayField']){days_pass.push(5);}
if(fields['satdayField']){days_pass.push(6);}
if(fields['sundayField']){days_pass.push(0);}}
var disabledDays=fields["exception_array"];if(days_pass.length){if(disabledDays!=undefined&&disabledDays.length){optionsObj.beforeShowDay=function(date){var checkday=date.getDay();var checkdate=jQuery.datepicker.formatDate('yy-mm-dd',date);var existPassDays=(days_pass.indexOf(checkday)>=0);var existDisableDays=(disabledDays.indexOf(checkdate)>=0);var maxDateVal=jQuery.datepicker.formatDate('yy-mm-dd',optionsObj.maxDate);var minDateVal=jQuery.datepicker.formatDate('yy-mm-dd',optionsObj.minDate);var outOfRange=(minDateVal!=''&&maxDateVal!=''?(checkdate<minDateVal||checkdate>maxDateVal):0);var inRange=(minDateVal!=''&&maxDateVal!=''?(checkdate>=minDateVal&&checkdate<=maxDateVal):1);var rangeDisabled=(disabledDays.indexOf(checkdate)>=maxDateVal);if((existPassDays&&!existDisableDays&&outOfRange)){return[false];}else if((existPassDays&&existDisableDays&&inRange)){return[false];}else if((!existPassDays&&!existDisableDays)){return[false];}else{if((existPassDays&&!existDisableDays&&inRange)){return[true];}else if(!existPassDays&&existDisableDays&&outOfRange){return[true];}else if(existDisableDays&&outOfRange){return[true];}else{if(inRange){return[true];}}}}}else{optionsObj.beforeShowDay=function(date){var checkday=date.getDay();var checkdate=jQuery.datepicker.formatDate('yy-mm-dd',date);var maxDateVal=jQuery.datepicker.formatDate('yy-mm-dd',optionsObj.maxDate);var minDateVal=jQuery.datepicker.formatDate('yy-mm-dd',optionsObj.minDate);var outOfRange=(minDateVal!=''&&maxDateVal!=''?(checkdate<minDateVal||checkdate>maxDateVal):0);var inRange=(minDateVal!=''&&maxDateVal!=''?(checkdate>=minDateVal&&checkdate<=maxDateVal):1);return[jQuery.inArray(checkday,days_pass)>=0&&inRange];}}}else{if(disabledDays.length){optionsObj.beforeShowDay=function(date){var checkdate=jQuery.datepicker.formatDate('yy-mm-dd',date);if(disabledDays.indexOf(checkdate)>=0)
return[true];return[false];}}else{}}
return optionsObj;}});jQuery(document).ready(function($){$(".readonly div input").attr('readonly',true);function checkDateRangeInMaxMinLimit(date,maxDate,minDate){maxDate=maxDate.setHours(0,0,0,0);minDate=minDate.setHours(0,0,0,0);date=date.setHours(0,0,0,0);if(maxDate!=undefined&&minDate!=undefined){if(date>maxDate||date<minDate){return false;}else{return true;}}else if(maxDate!=undefined&&minDate==undefined){if(date>maxDate){return false;}else{return true;}}else if(maxDate==undefined&&minDate!=undefined){if(date<minDate){return false;}else{return true;}}else{return true;}}
jQuery('li.check_in input.hasDatepicker').change(function(){var check_in=jQuery('li.check_in input.hasDatepicker').val();var date=new Date(check_in);date.setDate(date.getDate()+1);var check_out=jQuery('li.check_out input.hasDatepicker').datepicker('option','minDate',date);jQuery("li.check_out").val(check_out);});});}(jQuery));